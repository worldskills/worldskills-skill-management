<div class="row">
<div class="col-lg-10 col-lg-offset-1">

<alerts></alerts>

<div class="table-responsive">
    <table class="table table-striped">
        <colgroup>
            <col width="10%" />
            <col width="10%" />
            <col width="80%" />
        </colgroup>
        <thead>
            <tr>
                <th>{{ 'ordering' | translate }}</th>
                <th>{{ 'number' | translate }}</th>
                <th>{{ 'section_or_subsection' | translate }}</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat-start="chapter in document.chapters" class="form-group form-group-sm">
                <td>
                    <div class="btn-group">
                        <button type="button" class="btn btn-primary btn-xs" ng-click="moveChapterUp($index, chapter)" ng-disabled="$first || event.locked"><span class="glyphicon glyphicon-triangle-top"></span></button>
                        <button type="button" class="btn btn-primary btn-xs" ng-click="moveChapterDown($index, chapter)" ng-disabled="$last || event.locked"><span class="glyphicon glyphicon-triangle-bottom"></span></button>
                    </div>
                </td>
                <td>{{ chapter.chapter.number }} </td>
                <td><a href ng-click="editChapter($index, chapter)">{{ chapter.chapter.title.text }}</a></td>
            </tr>
            <tr ng-repeat-end>
                <td colspan="3">
                    <table class="table-nested">
                        <colgroup>
                            <col width="10%" />
                            <col width="10%" />
                            <col width="50%" />
                            <col width="20%" />
                            <col width="10%" />
                        </colgroup>
                        <tbody>
                            <tr ng-repeat="section in chapter.chapter.sections" class="form-group form-group-sm">
                                <td>&nbsp;</td>
                                <td>{{ section.number }}</td>
                                <td><span ng-repeat="i in [].constructor(section.level) track by $index">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href ng-click="editSection($index, chapter.chapter, section)">{{ section.title.text }}</a></td>
                                <td><em ng-show="section.skill_editable">({{ 'editable_by_skill' | translate }})</em></td>
                                <td>
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-primary btn-xs" ng-click="moveSectionUp($index, chapter.chapter, section)" ng-disabled="$first || event.locked"><span class="glyphicon glyphicon-triangle-top"></span></button>
                                        <button type="button" class="btn btn-primary btn-xs" ng-click="moveSectionDown($index, chapter.chapter, section)" ng-disabled="$last || event.locked"><span class="glyphicon glyphicon-triangle-bottom"></span></button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>&nbsp;</td>
                                <td>&nbsp;</td>
                                <td colspan="3">&nbsp;&nbsp;&nbsp;&nbsp;<button type="button" class="btn btn-success btn-xs" ng-click="addSection(chapter)">{{ 'add_subsection' | translate }}</button></td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr ng-show="document.chapters.length == 0">
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>{{ 'message_no_chapters_found' | translate }}</td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td><button type="button" class="btn btn-success btn-xs" ng-click="addChapter()">{{ 'add_section' | translate }}</button></td>
            </tr>
            <tr ng-show="loading">
                <td colspan="3"><ws-spinner></ws-spinner></td>
            </tr>
        </tbody>
    </table>
</div>


</div>
</div>
